// ============================================================================
// PART 1 OF 3 - UPDATED FOR V2 CONTRACT
// ============================================================================
// Copy this ENTIRE section first, then Part 2, then Part 3
// ============================================================================

import React, { useState, useEffect } from 'react';
import { 
  Wallet, Menu, X, CheckCircle, AlertCircle, Clock, Target, 
  Shield, TrendingUp, Users, Coins, Building, Download, 
  FileText, Zap, Globe, Send, Twitter, Instagram, Gift, Star, Award
} from 'lucide-react';
import * as anchor from '@coral-xyz/anchor';
import { Connection, PublicKey, Transaction, SystemProgram, LAMPORTS_PER_SOL, TransactionInstruction } from '@solana/web3.js';
import { TOKEN_PROGRAM_ID, getAssociatedTokenAddress, createAssociatedTokenAccountInstruction } from '@solana/spl-token';

// ============================================================================
// LLTY LOGO COMPONENT
// ============================================================================
const LLTYLogo = ({ size = 64 }) => (
  <svg width={size} height={size} viewBox="0 0 200 200" style={{ filter: 'drop-shadow(0 0 10px rgba(251, 191, 36, 0.5))' }}>
    <defs>
      <linearGradient id="goldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style={{ stopColor: '#fbbf24', stopOpacity: 1 }} />
        <stop offset="100%" style={{ stopColor: '#f59e0b', stopOpacity: 1 }} />
      </linearGradient>
    </defs>
    <circle cx="100" cy="100" r="95" fill="url(#goldGrad)" stroke="#fff" strokeWidth="3" />
    <g transform="translate(100, 100)">
      <rect x="-35" y="-45" width="20" height="60" fill="#1e293b" rx="2" />
      <rect x="-10" y="-45" width="20" height="60" fill="#1e293b" rx="2" />
      <rect x="15" y="-45" width="20" height="60" fill="#1e293b" rx="2" />
      <rect x="-35" y="-55" width="15" height="8" fill="#fbbf24" rx="1" />
      <rect x="-15" y="-55" width="15" height="8" fill="#fbbf24" rx="1" />
      <rect x="20" y="-55" width="15" height="8" fill="#fbbf24" rx="1" />
      <rect x="-40" y="20" width="80" height="15" fill="#1e293b" rx="3" />
      <text x="0" y="32" textAnchor="middle" fill="#fbbf24" fontSize="14" fontWeight="bold" fontFamily="Arial">LLTY</text>
    </g>
  </svg>
);

// ============================================================================
// TRANSLATIONS (ARABIC & ENGLISH) - UPDATED FOR V2
// ============================================================================
const translations = {
  ar: {
    title: 'Loyalty',
    subtitle: 'ÿ£ŸàŸÑ ÿπŸÖŸÑÿ© ÿßÿ≥ÿ™ÿ´ŸÖÿßÿ± ÿπŸÇÿßÿ±Ÿä ÿπÿ±ÿ®Ÿä',
    connectWallet: 'ÿ±ÿ®ÿ∑ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©',
    disconnect: 'ŸÇÿ∑ÿπ ÿßŸÑÿßÿ™ÿµÿßŸÑ',
    connecting: 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿßÿ™ÿµÿßŸÑ...',
    walletNotConnected: 'ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑÿ©',
    
    // VIP Early Access
    vipAccess: 'ŸàÿµŸàŸÑ VIP ÿßŸÑŸÖÿ®ŸÉÿ±',
    vipTitle: 'üåü ŸÅÿ™ÿ±ÿ© VIP ÿßŸÑÿ≠ÿµÿ±Ÿäÿ© - ÿ£ŸàŸÑ 50 ŸÖÿ¥ÿ™ÿ±Ÿä',
    vipDescription: 'ŸÉŸÜ ŸÖŸÜ ÿ£Ÿàÿßÿ¶ŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿ´ŸÖÿ±ŸäŸÜ Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ≥ÿπÿ± ÿ≠ÿµÿ±Ÿä!',
    vipPrice: 'ÿ≥ÿπÿ± VIP: $0.001 ŸÑŸÉŸÑ LLTY',
    vipMinPurchase: 'ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ: $1,000',
    vipDuration: 'ŸÖÿØÿ© VIP: ŸäŸàŸÖÿßŸÜ ŸÇÿ®ŸÑ ÿßŸÑÿ®Ÿäÿπ ÿßŸÑÿπÿßŸÖ',
    vipSlots: 'ÿßŸÑŸÖŸÇÿßÿπÿØ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©',
    vipBenefits: 'ŸÖÿ≤ÿßŸäÿß VIP',
    vipBenefit1: '‚ú® ÿ≥ÿπÿ± ÿ≠ÿµÿ±Ÿä $0.001 (ÿ£ŸÇŸÑ ŸÖŸÜ ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© 1 ÿ®ŸÄ 75%)',
    vipBenefit2: 'üéØ ÿ∂ŸÖÿßŸÜ ÿßŸÑÿ¥ÿ±ÿßÿ° ŸÇÿ®ŸÑ ÿßŸÑÿ¢ÿÆÿ±ŸäŸÜ',
    vipBenefit3: 'üéÅ ŸÖŸÉÿßŸÅÿ£ÿ© ŸàŸÑÿßÿ° ÿ•ÿ∂ÿßŸÅŸäÿ© 10%',
    vipBenefit4: 'üëë ÿ¥ÿßÿ±ÿ© VIP ÿ≠ÿµÿ±Ÿäÿ©',
    vipEnded: 'ÿßŸÜÿ™Ÿáÿ™ ŸÅÿ™ÿ±ÿ© VIP',
    vipActive: 'ŸÅÿ™ÿ±ÿ© VIP ŸÜÿ¥ÿ∑ÿ© ÿßŸÑÿ¢ŸÜ!',
    
    // Referral System
    referralTitle: 'ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ•ÿ≠ÿßŸÑÿ©',
    referralDescription: 'ÿßÿØÿπŸè ÿ£ÿµÿØŸÇÿßÿ°ŸÉ Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ŸÖŸÉÿßŸÅÿ¢ÿ™!',
    referralBonus: 'ŸÖŸÉÿßŸÅÿ£ÿ© ÿßŸÑÿ•ÿ≠ÿßŸÑÿ©: 5% ŸÖŸÜ ŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™ŸáŸÖ',
    referralHow: 'ŸÉŸäŸÅ ŸäÿπŸÖŸÑÿü',
    referralStep1: '1. ÿ¥ÿßÿ±ŸÉ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ•ÿ≠ÿßŸÑÿ© ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ',
    referralStep2: '2. Ÿäÿ¥ÿ™ÿ±Ÿä ÿµÿØŸäŸÇŸÉ ÿ±ŸÖŸàÿ≤ LLTY',
    referralStep3: '3. ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ 5% ÿ•ÿ∂ÿßŸÅŸäÿ© ŸÖŸÜ ŸÖÿ¥ÿ™ÿ±Ÿäÿßÿ™Ÿá',
    referralExample: 'ŸÖÿ´ÿßŸÑ: ÿ•ÿ∞ÿß ÿßÿ¥ÿ™ÿ±Ÿâ ÿµÿØŸäŸÇŸÉ $1,000ÿå ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ $50 ÿ±ŸÖŸàÿ≤ LLTY ŸÖÿ¨ÿßŸÜÿßŸã!',
    yourReferralLink: 'ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ•ÿ≠ÿßŸÑÿ© ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ',
    
    // Bonus Tiers
    bonusTitle: 'ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿßŸÑŸÖŸÉÿßŸÅÿ¢ÿ™',
    bonusDescription: 'ÿßÿ¥ÿ™ÿ±Ÿê ÿ£ŸÉÿ´ÿ±ÿå ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ£ŸÉÿ´ÿ±!',
    bonusTier1: 'üí∞ ÿßÿ¥ÿ™ÿ±Ÿê $1,000+: ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ 5% ŸÖŸÉÿßŸÅÿ£ÿ©',
    bonusTier2: 'üíé ÿßÿ¥ÿ™ÿ±Ÿê $5,000+: ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ 10% ŸÖŸÉÿßŸÅÿ£ÿ©',
    bonusTier3: 'üëë ÿßÿ¥ÿ™ÿ±Ÿê $10,000+: ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ 15% ŸÖŸÉÿßŸÅÿ£ÿ©',
    bonusExample: 'ŸÖÿ´ÿßŸÑ: ÿ¥ÿ±ÿßÿ° $10,000 = 2,500,000 LLTY + 375,000 ŸÖŸÉÿßŸÅÿ£ÿ© = 2,875,000 LLTY ÿ•ÿ¨ŸÖÿßŸÑŸä!',
    
    // Claim System
    claimTitle: 'ŸÜÿ∏ÿßŸÖ ÿßŸÑŸÖÿ∑ÿßŸÑÿ®ÿ©',
    claimDescription: 'ÿßŸÑÿ±ŸÖŸàÿ≤ ŸÖÿ™ÿßÿ≠ÿ© ŸÑŸÑŸÖÿ∑ÿßŸÑÿ®ÿ© ÿ®ÿπÿØ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑÿ®Ÿäÿπ ÿßŸÑŸÖÿ≥ÿ®ŸÇ',
    claimWhen: 'ŸÖÿ™Ÿâ ŸäŸÖŸÉŸÜŸÜŸä ÿßŸÑŸÖÿ∑ÿßŸÑÿ®ÿ©ÿü',
    claimAnswer: 'ÿ®ÿπÿØ ÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© 3ÿå ŸäŸÖŸÉŸÜŸÉ ÿßŸÑŸÖÿ∑ÿßŸÑÿ®ÿ© ÿ®ÿ±ŸÖŸàÿ≤ŸÉ ŸÅŸä ÿ£Ÿä ŸàŸÇÿ™',
    claimButton: 'ÿ∑ÿßŸÑÿ® ÿ®ÿ±ŸÖŸàÿ≤ LLTY',
    claimAvailable: 'ŸÖÿ™ÿßÿ≠ ŸÑŸÑŸÖÿ∑ÿßŸÑÿ®ÿ©',
    claimSuccess: 'ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ∑ÿßŸÑÿ®ÿ© ÿ®ŸÜÿ¨ÿßÿ≠!',
    
    // Phases
    phase: 'ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ©',
    nextPriceIn: 'ÿßŸÑÿ≥ÿπÿ± ÿßŸÑŸÇÿßÿØŸÖ ÿÆŸÑÿßŸÑ',
    presaleEnded: 'ÿßŸÜÿ™ŸáŸâ ÿßŸÑÿ®Ÿäÿπ ÿßŸÑŸÖÿ≥ÿ®ŸÇ',
    days: 'ÿ£ŸäÿßŸÖ',
    hours: 'ÿ≥ÿßÿπÿßÿ™',
    minutes: 'ÿØŸÇÿßÿ¶ŸÇ',
    seconds: 'ÿ´ŸàÿßŸÜŸä',
    
    // Purchase
    selectCurrency: 'ÿßÿÆÿ™ÿ± ÿßŸÑÿπŸÖŸÑÿ©',
    enterAmount: 'ÿ£ÿØÿÆŸÑ ÿßŸÑŸÖÿ®ŸÑÿ∫',
    youWillReceive: 'ÿ≥ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ',
    buy: 'ÿ¥ÿ±ÿßÿ° ÿ±ŸÖŸàÿ≤ LLTY',
    processing: 'ÿ¨ÿßÿ±Ÿä ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©...',
    success: 'ŸÜÿ¨ÿ≠ ÿßŸÑÿ¥ÿ±ÿßÿ°!',
    error: 'ÿÆÿ∑ÿ£',
    
    // Stats
    totalRaised: 'ÿßŸÑŸÖÿ®ŸÑÿ∫ ÿßŸÑŸÖÿ¨ŸÖŸàÿπ',
    of: 'ŸÖŸÜ',
    totalSupply: 'ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÉŸÑŸä',
    tokenPrice: 'ÿ≥ÿπÿ± ÿßŸÑÿπŸÖŸÑÿ©',
    cities: 'ÿßŸÑŸÖÿØŸÜ',
    yourBalance: 'ÿ±ÿµŸäÿØŸÉ',
    purchased: 'ÿ™ŸÖ ÿßŸÑÿ¥ÿ±ÿßÿ°',
    investNow: 'ÿßÿ≥ÿ™ÿ´ŸÖÿ± ÿßŸÑÿ¢ŸÜ',
    
    // Withdrawal Info
    withdrawalTitle: 'ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ≥ÿ≠ÿ®',
    withdrawalDuring: 'ÿÆŸÑÿßŸÑ ÿßŸÑÿ®Ÿäÿπ ÿßŸÑŸÖÿ≥ÿ®ŸÇ: ŸäŸÖŸÉŸÜ ÿ≥ÿ≠ÿ® 60% ŸÅŸÇÿ∑',
    withdrawalAfter: 'ÿ®ÿπÿØ ÿßŸÑÿ®Ÿäÿπ ÿßŸÑŸÖÿ≥ÿ®ŸÇ: ŸäŸÖŸÉŸÜ ÿ≥ÿ≠ÿ® 100%',
    withdrawalReason: 'ÿ≠ŸÖÿßŸäÿ© ÿ∂ÿØ ÿßŸÑÿßÿ≠ÿ™ŸäÿßŸÑ',
    
    // Navigation
    navigation: {
      home: 'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©',
      about: 'ŸÖŸÜ ŸÜÿ≠ŸÜ',
      howItWorks: 'ŸÉŸäŸÅ ŸäÿπŸÖŸÑ',
      vipAccess: 'ŸàÿµŸàŸÑ VIP',
      bonuses: 'ÿßŸÑŸÖŸÉÿßŸÅÿ¢ÿ™',
      referrals: 'ÿßŸÑÿ•ÿ≠ÿßŸÑÿßÿ™',
      cities: 'ÿßŸÑŸÖÿØŸÜ',
      tokenomics: 'ÿßŸÇÿ™ÿµÿßÿØŸäÿßÿ™ ÿßŸÑÿπŸÖŸÑÿ©',
      roadmap: 'ÿÆÿßÿ±ÿ∑ÿ© ÿßŸÑÿ∑ÿ±ŸäŸÇ',
    },
    
    // Other sections
    cityList: 'ÿπŸéŸÖŸëÿßŸÜÿå ÿØÿ®Ÿäÿå ÿ£ÿ®Ÿàÿ∏ÿ®Ÿäÿå ÿßŸÑÿ±Ÿäÿßÿ∂ÿå ÿ¨ÿØÿ©ÿå ÿßŸÑŸÇÿßŸáÿ±ÿ©ÿå ÿ®Ÿäÿ±Ÿàÿ™ÿå ÿßŸÑÿØŸàÿ≠ÿ©ÿå ÿßŸÑŸÉŸàŸäÿ™',
    aboutTitle: 'ÿπŸÜ Loyalty',
    aboutText: 'Loyalty (LLTY) ŸáŸà ÿ£ŸàŸÑ ÿπŸÖŸÑÿ© ÿßÿ≥ÿ™ÿ´ŸÖÿßÿ± ÿπŸÇÿßÿ±Ÿä ÿπÿ±ÿ®Ÿä Ÿäÿ±ÿ®ÿ∑ ÿßŸÑŸÖÿ≥ÿ™ÿ´ŸÖÿ±ŸäŸÜ ÿ®ŸÅÿ±ÿµ ÿπŸÇÿßÿ±Ÿäÿ© ÿπÿßŸÑŸäÿ© ÿßŸÑÿ¨ŸàÿØÿ© ŸÅŸä 9 ŸÖÿØŸÜ ÿπÿ±ÿ®Ÿäÿ© ŸÉÿ®ÿ±Ÿâ. ŸÉŸÑ ÿπŸÖŸÑÿ© LLTY ŸäŸÖÿ´ŸÑ ÿ≠ÿµÿ© ŸÅŸä ŸÖÿ≠ŸÅÿ∏ÿ© ÿπŸÇÿßÿ±Ÿäÿ© ŸÖÿ™ŸÜŸàÿπÿ©ÿå ŸÖŸÖÿß ŸäŸàŸÅÿ± ÿπŸàÿßÿ¶ÿØ ŸÖÿ≥ÿ™ŸÇÿ±ÿ© Ÿàÿ•ŸÖŸÉÿßŸÜÿßÿ™ ŸÜŸÖŸà ÿ∑ŸàŸäŸÑÿ© ÿßŸÑÿ£ÿ¨ŸÑ.',
    
    howItWorks: 'ŸÉŸäŸÅ ŸäÿπŸÖŸÑ',
    mechanicsTitle1: 'ÿ¥ÿ±ÿßÿ° ÿ±ŸÖŸàÿ≤ LLTY',
    mechanicsDesc1: 'ŸÇŸÖ ÿ®ÿ¥ÿ±ÿßÿ° ÿ±ŸÖŸàÿ≤ LLTY ÿÆŸÑÿßŸÑ ÿßŸÑÿ®Ÿäÿπ ÿßŸÑŸÖÿ≥ÿ®ŸÇ ÿ®ÿ£ÿ≥ÿπÿßÿ± ÿÆÿßÿµÿ©. ÿßŸÑÿ≥ÿπÿ± Ÿäÿ≤ÿØÿßÿØ ŸÉŸÑ ŸÖÿ±ÿ≠ŸÑÿ©.',
    mechanicsTitle2: 'ÿßÿ≥ÿ™ÿ´ŸÖÿßÿ± ÿπŸÇÿßÿ±Ÿä',
    mechanicsDesc2: 'ÿßŸÑÿ£ŸÖŸàÿßŸÑ ÿßŸÑŸÖÿ¨ŸÖÿπÿ© ÿ™Ÿèÿ≥ÿ™ÿ´ŸÖÿ± ŸÅŸä ÿπŸÇÿßÿ±ÿßÿ™ ŸÖÿÆÿ™ÿßÿ±ÿ© ŸÅŸä 9 ŸÖÿØŸÜ ÿπÿ±ÿ®Ÿäÿ©.',
    mechanicsTitle3: 'ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿπŸàÿßÿ¶ÿØ',
    mechanicsDesc3: 'ÿßÿ±ÿ®ÿ≠ ŸÖŸÜ ÿ•Ÿäÿ¨ÿßÿ±ÿßÿ™ ÿßŸÑÿπŸÇÿßÿ±ÿßÿ™ Ÿàÿßÿ±ÿ™ŸÅÿßÿπ ŸÇŸäŸÖÿ™Ÿáÿß.',
    
    tokenomicsTitle: 'ÿßŸÇÿ™ÿµÿßÿØŸäÿßÿ™ LLTY',
    presaleAllocation: 'ÿßŸÑÿ®Ÿäÿπ ÿßŸÑŸÖÿ≥ÿ®ŸÇ',
    liquidityPool: 'ŸÖÿ¨ŸÖÿπ ÿßŸÑÿ≥ŸäŸàŸÑÿ©',
    team: 'ÿßŸÑŸÅÿ±ŸäŸÇ',
    marketing: 'ÿßŸÑÿ™ÿ≥ŸàŸäŸÇ',
    reserve: 'ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä',
    socialImpact: 'ÿßŸÑÿ£ÿ´ÿ± ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸä',
    
    roadmapTitle: 'ÿÆÿßÿ±ÿ∑ÿ© ÿßŸÑÿ∑ÿ±ŸäŸÇ',
    
    security: 'ÿßŸÑÿ£ŸÖÿßŸÜ ŸàÿßŸÑÿ¥ŸÅÿßŸÅŸäÿ©',
    securityText: 'ÿπŸÇÿØ ÿ∞ŸÉŸä ŸÖÿ≠ŸÇŸÇ ŸàŸÖÿØŸÇŸÇ ÿ®ÿßŸÑŸÉÿßŸÖŸÑ ÿπŸÑŸâ Solana blockchain. ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿπÿßŸÖŸÑÿßÿ™ ÿ¥ŸÅÿßŸÅÿ© ŸàŸÖÿ≠ŸÖŸäÿ©.',
    
    whitepaperAr: 'ÿßŸÑŸàÿ±ŸÇÿ© ÿßŸÑÿ®Ÿäÿ∂ÿßÿ° (ÿπÿ±ÿ®Ÿä)',
    whitepaperEn: 'ÿßŸÑŸàÿ±ŸÇÿ© ÿßŸÑÿ®Ÿäÿ∂ÿßÿ° (English)',
    
    swapping: 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ USDC...',
    swapSuccess: 'ÿ™ŸÖ ÿßŸÑÿ™ÿ®ÿØŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠',
    swapFailed: 'ŸÅÿ¥ŸÑ ÿßŸÑÿ™ÿ®ÿØŸäŸÑ',
  },
  
  en: {
    title: 'Loyalty',
    subtitle: 'The First Arab Real Estate Investment Token',
    connectWallet: 'Connect Wallet',
    disconnect: 'Disconnect',
    connecting: 'Connecting...',
    walletNotConnected: 'Wallet not connected',
    
    // VIP Early Access
    vipAccess: 'VIP Early Access',
    vipTitle: 'üåü Exclusive VIP Period - First 50 Buyers',
    vipDescription: 'Be among the first investors and get an exclusive price!',
    vipPrice: 'VIP Price: $0.001 per LLTY',
    vipMinPurchase: 'Minimum: $1,000',
    vipDuration: 'VIP Duration: 2 Days Before Public Sale',
    vipSlots: 'Slots Remaining',
    vipBenefits: 'VIP Benefits',
    vipBenefit1: '‚ú® Exclusive $0.001 price (75% cheaper than Phase 1)',
    vipBenefit2: 'üéØ Guaranteed purchase before everyone else',
    vipBenefit3: 'üéÅ Extra 10% loyalty bonus',
    vipBenefit4: 'üëë Exclusive VIP badge',
    vipEnded: 'VIP Period Ended',
    vipActive: 'VIP Period Active Now!',
    
    // Referral System
    referralTitle: 'Referral System',
    referralDescription: 'Invite your friends and earn rewards!',
    referralBonus: 'Referral Bonus: 5% of their purchases',
    referralHow: 'How it works?',
    referralStep1: '1. Share your unique referral link',
    referralStep2: '2. Your friend buys LLTY tokens',
    referralStep3: '3. You get 5% bonus from their purchase',
    referralExample: 'Example: Friend buys $1,000, you get $50 in LLTY tokens free!',
    yourReferralLink: 'Your Referral Link',
    
    // Bonus Tiers
    bonusTitle: 'Bonus Tiers',
    bonusDescription: 'Buy more, get more!',
    bonusTier1: 'üí∞ Buy $1,000+: Get 5% Bonus',
    bonusTier2: 'üíé Buy $5,000+: Get 10% Bonus',
    bonusTier3: 'üëë Buy $10,000+: Get 15% Bonus',
    bonusExample: 'Example: Buy $10,000 = 2,500,000 LLTY + 375,000 bonus = 2,875,000 LLTY total!',
    
    // Claim System
    claimTitle: 'Claim System',
    claimDescription: 'Tokens available for claiming after presale ends',
    claimWhen: 'When can I claim?',
    claimAnswer: 'After Phase 3 ends, you can claim your tokens anytime',
    claimButton: 'Claim LLTY Tokens',
    claimAvailable: 'Available to Claim',
    claimSuccess: 'Successfully claimed!',
    
    // Phases
    phase: 'Phase',
    nextPriceIn: 'Next Price In',
    presaleEnded: 'Presale Ended',
    days: 'Days',
    hours: 'Hours',
    minutes: 'Minutes',
    seconds: 'Seconds',
    
    // Purchase
    selectCurrency: 'Select Currency',
    enterAmount: 'Enter Amount',
    youWillReceive: 'You Will Receive',
    buy: 'Buy LLTY Tokens',
    processing: 'Processing...',
    success: 'Purchase successful!',
    error: 'Error',
    
    // Stats
    totalRaised: 'Total Raised',
    of: 'of',
    totalSupply: 'Total Supply',
    tokenPrice: 'Token Price',
    cities: 'Cities',
    yourBalance: 'Your Balance',
    purchased: 'Purchased',
    investNow: 'Invest Now',
    
    // Withdrawal Info
    withdrawalTitle: 'Withdrawal Info',
    withdrawalDuring: 'During Presale: Only 60% can be withdrawn',
    withdrawalAfter: 'After Presale: 100% can be withdrawn',
    withdrawalReason: 'Protection against rug pulls',
    
    // Navigation
    navigation: {
      home: 'Home',
      about: 'About',
      howItWorks: 'How It Works',
      vipAccess: 'VIP Access',
      bonuses: 'Bonuses',
      referrals: 'Referrals',
      cities: 'Cities',
      tokenomics: 'Tokenomics',
      roadmap: 'Roadmap',
    },
    
    // Other sections
    cityList: 'Amman, Dubai, Abu Dhabi, Riyadh, Jeddah, Cairo, Beirut, Doha, Kuwait City',
    aboutTitle: 'About Loyalty',
    aboutText: 'Loyalty (LLTY) is the first Arab real estate investment token connecting investors to high-quality real estate opportunities across 9 major Arab cities. Each LLTY token represents a share in a diversified real estate portfolio, providing stable returns and long-term growth potential.',
    
    howItWorks: 'How It Works',
    mechanicsTitle1: 'Buy LLTY Tokens',
    mechanicsDesc1: 'Purchase LLTY tokens during presale at special prices. Price increases each phase.',
    mechanicsTitle2: 'Real Estate Investment',
    mechanicsDesc2: 'Pooled funds are invested in selected properties across 9 Arab cities.',
    mechanicsTitle3: 'Earn Returns',
    mechanicsDesc3: 'Benefit from property rentals and appreciation.',
    
    tokenomicsTitle: 'LLTY Tokenomics',
    presaleAllocation: 'Presale',
    liquidityPool: 'Liquidity Pool',
    team: 'Team',
    marketing: 'Marketing',
    reserve: 'Reserve',
    socialImpact: 'Social Impact',
    
    roadmapTitle: 'Roadmap',
    
    security: 'Security & Transparency',
    securityText: 'Fully verified and audited smart contract on Solana blockchain. All transactions are transparent and secured.',
    
    whitepaperAr: 'Whitepaper (Arabic)',
    whitepaperEn: 'Whitepaper (English)',
    
    swapping: 'Swapping to USDC...',
    swapSuccess: 'Swap successful',
    swapFailed: 'Swap failed',
  }
};

// Roadmap data
const roadmapData = [
  { quarter: 'Q1 2026', title: 'Presale Launch üöÄ', desc: 'VIP early access and public presale' },
  { quarter: 'Q2 2026', title: 'Global Marketing üì£', desc: 'Expansion and partnerships' },
  { quarter: 'Q3 2026', title: 'Exchange Listings üíé', desc: 'Major DEX and CEX listings' },
  { quarter: 'Q4 2026', title: 'First $50M Property üè¢', desc: 'Initial real estate acquisition' },
  { quarter: 'Q1 2027', title: 'Regional Expansion üåç', desc: 'Enter 3 new Arab markets' },
  { quarter: 'Q2 2027', title: '$250M Portfolio üí∞', desc: 'Diversified property portfolio' },
  { quarter: 'Q3 2027', title: "Int'l Partnerships ü§ù", desc: 'Global real estate networks' },
  { quarter: 'Q4 2027', title: '$500M+ Empire üëë', desc: 'Major portfolio milestone' },
];

// Cities carousel data
const citiesData = [
  { name: 'Amman, Jordan', image: 'https://images.unsplash.com/photo-1578894381163-e72c17f2d45f?w=800' },
  { name: 'Dubai, UAE', image: 'https://images.unsplash.com/photo-1512453979798-5ea266f8880c?w=800' },
  { name: 'Abu Dhabi, UAE', image: 'https://images.unsplash.com/photo-1512632578888-169bbbc64f33?w=800' },
  { name: 'Riyadh, Saudi Arabia', image: 'https://images.unsplash.com/photo-1591608971362-f08b2a75731a?w=800' },
  { name: 'Jeddah, Saudi Arabia', image: 'https://images.unsplash.com/photo-1586724237569-f3d0c1dee8c6?w=800' },
  { name: 'Cairo, Egypt', image: 'https://images.unsplash.com/photo-1539768942893-daf53e448371?w=800' },
  { name: 'Beirut, Lebanon', image: 'https://images.unsplash.com/photo-1580922090158-85e89c1d9c9e?w=800' },
  { name: 'Doha, Qatar', image: 'https://images.unsplash.com/photo-1574164047321-cc3a85cc5e6d?w=800' },
  { name: 'Kuwait City, Kuwait', image: 'https://images.unsplash.com/photo-1577699113768-7a5e25863083?w=800' },
];

const LLTYPresale = () => {
  // ‚úÖ STATE MANAGEMENT
  const [wallet, setWallet] = useState(null);
  const [balance, setBalance] = useState(0);
  const [purchased, setPurchased] = useState(0);
  const [lang, setLang] = useState('ar');
  const [loading, setLoading] = useState(false);
  const [amount, setAmount] = useState('');
  const [currency, setCurrency] = useState('USDC');
  const [presaleEnded, setPresaleEnded] = useState(false);
  const [menuOpen, setMenuOpen] = useState(false);
  const [currentPhase, setCurrentPhase] = useState(1);
  const [phaseTimeRemaining, setPhaseTimeRemaining] = useState({ days: 0, hours: 0, minutes: 0, seconds: 0 });
  const [notification, setNotification] = useState({ show: false, type: '', message: '' });
  const [connection, setConnection] = useState(null);
  const [solPrice, setSolPrice] = useState(0);
  const [walletBalances, setWalletBalances] = useState({ SOL: 0, USDC: 0, USDT: 0 });
  const [currentCityIndex, setCurrentCityIndex] = useState(0);
  const [totalRaised, setTotalRaised] = useState(0);
  const [totalLLTYSold, setTotalLLTYSold] = useState(0);
  const [vipBuyersCount, setVipBuyersCount] = useState(0);
  const [isVipPeriod, setIsVipPeriod] = useState(false);

  // ‚úÖ BLOCKCHAIN CONFIGURATION - V2
  const NETWORK = 'devnet';
  const RPC_ENDPOINT = 'https://api.devnet.solana.com';
  const ADDRESSES = {
    PROGRAM_ID: new PublicKey('2oArywYY7xHyoV1xoF9g9QKkyKDHe3rA9kRyu1H8ZQxo'),
    LLTY_MINT: new PublicKey('6UYrC72Xseu8bSrjZz5VUZ3aGo68MEqpNNyMgqqcfajf'),
    USDC_MINT: new PublicKey('7e54j2gSb31gpeW3sLZktexZBqrA1tLzg14ncuiphrP4'),
    USDT_MINT: new PublicKey('Gh9ZwEmdLJ8DscKNTkTqPbNwLNNBjuwSzGqKzNNc98FK'),
    PRESALE_PDA: new PublicKey('9b55xaKqELt1fYHn6MXA9vETy4ngTPxSZZ1SJmTQN1Kr'),
    LLTY_VAULT: new PublicKey('9UqwUfRpi41GBTVuHPiSjWXUoW4EoWah3aYdiUspfU7f'),
    USDC_VAULT: new PublicKey('Hzmv4eWhLFbfC7XpDmf3dpMCn6jHDXDSYWosv87Nmegh')
  };
  
  // ‚úÖ PRESALE TIMING - V2
  const PRESALE_START = new Date('2026-01-01T00:00:00Z').getTime();
  const VIP_DURATION = 2 * 24 * 60 * 60 * 1000; // 2 days
  const PUBLIC_START = PRESALE_START + VIP_DURATION;
  const PRESALE_END = new Date('2026-02-11T23:59:59Z').getTime();
  const PHASE_DURATION = 14 * 24 * 60 * 60 * 1000; // 14 days
  
  // Phase prices and allocations
  const PHASE_PRICES_DISPLAY = { 
    vip: 0.001,  // VIP price
    1: 0.004,    // Phase 1
    2: 0.005,    // Phase 2
    3: 0.006     // Phase 3
  };
  
  const PHASE_ALLOCATIONS = {
    1: 1_500_000_000, // 1.5B tokens
    2: 1_500_000_000, // 1.5B tokens
    3: 1_000_000_000  // 1B tokens
  };
  
  // Calculate real presale target
  const PRESALE_TARGET = (
    (PHASE_ALLOCATIONS[1] * PHASE_PRICES_DISPLAY[1]) +
    (PHASE_ALLOCATIONS[2] * PHASE_PRICES_DISPLAY[2]) +
    (PHASE_ALLOCATIONS[3] * PHASE_PRICES_DISPLAY[3])
  ); // = $29,500,000

  const t = translations[lang];
  
  // THIS IS THE END OF PART 1
  // Continue to PART 2...
// ============================================================================
// PART 2 OF 3 - UPDATED FOR V2 (FUNCTIONS) - COPY AFTER PART 1
// ============================================================================
// Keep all existing functions, just paste after Part 1
// ============================================================================

  // Shortened address display
  const shortenAddress = (address) => {
    if (!address) return '';
    return `${address.slice(0, 4)}...${address.slice(-4)}`;
  };

  // Scroll to section
  const scrollToSection = (id) => {
    setMenuOpen(false);
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth' });
    }
  };

  // Show notification
  const showNotification = (type, message) => {
    setNotification({ show: true, type, message });
    setTimeout(() => setNotification({ show: false, type: '', message: '' }), 5000);
  };

  // Get urgency message based on phase
  const getUrgencyMessage = () => {
    if (isVipPeriod) {
      return lang === 'ar' ? '‚ö° ŸÅÿ™ÿ±ÿ© VIP ŸÜÿ¥ÿ∑ÿ©! ŸÅŸÇÿ∑ 50 ŸÖŸÇÿπÿØ ŸÖÿ™ÿßÿ≠!' : '‚ö° VIP Period Active! Only 50 Slots!';
    }
    const hoursLeft = Math.floor(phaseTimeRemaining.days * 24 + phaseTimeRemaining.hours);
    if (hoursLeft < 24) {
      return lang === 'ar' ? '‚ö° ÿ£ŸÇŸÑ ŸÖŸÜ 24 ÿ≥ÿßÿπÿ© ŸÑŸÑÿ≥ÿπÿ± ÿßŸÑÿ≠ÿßŸÑŸä!' : '‚ö° Less than 24 hours at this price!';
    }
    if (hoursLeft < 72) {
      return lang === 'ar' ? 'üî• ÿßŸÑÿ≥ÿπÿ± Ÿäÿ±ÿ™ŸÅÿπ ŸÇÿ±Ÿäÿ®ÿßŸã!' : 'üî• Price increasing soon!';
    }
    return lang === 'ar' ? '‚è∞ ŸàŸÇÿ™ ŸÖÿ≠ÿØŸàÿØ ÿ®Ÿáÿ∞ÿß ÿßŸÑÿ≥ÿπÿ±' : '‚è∞ Limited time at this price';
  };

  // Wallet provider
  const getProvider = () => {
    if ('phantom' in window) {
      return window.phantom?.solana;
    }
    if ('solflare' in window) {
      return window.solflare;
    }
    return null;
  };

  // Connect wallet
  const connectWallet = async () => {
    setLoading(true);
    try {
      const provider = getProvider();
      if (!provider) {
        showNotification('error', lang === 'ar' ? 'Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ´ÿ®Ÿäÿ™ Phantom ÿ£Ÿà Solflare' : 'Please install Phantom or Solflare wallet');
        window.open('https://phantom.app/', '_blank');
        setLoading(false);
        return;
      }
      const resp = await provider.connect();
      const address = resp.publicKey.toString();
      setWallet(address);
      localStorage.setItem('llty_wallet', JSON.stringify({ address, purchased: 0 }));
      showNotification('success', t.success);
      await fetchBalances(address);
    } catch (err) {
      if (err.message?.includes('User rejected')) {
        showNotification('error', lang === 'ar' ? 'ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿßÿ™ÿµÿßŸÑ' : 'Connection cancelled');
      } else {
        showNotification('error', t.error + ': ' + (err.message || 'Unknown error'));
      }
    }
    setLoading(false);
  };

  // Disconnect wallet
  const disconnectWallet = () => {
    const provider = getProvider();
    if (provider?.disconnect) provider.disconnect();
    localStorage.removeItem('llty_wallet');
    setWallet(null);
    setBalance(0);
    setPurchased(0);
    setWalletBalances({ SOL: 0, USDC: 0, USDT: 0 });
  };

  // Fetch balances
  const fetchBalances = async (address) => {
    if (!connection || !address) return;
    try {
      const publicKey = new PublicKey(address);
      try {
        const lltyAta = await getAssociatedTokenAddress(ADDRESSES.LLTY_MINT, publicKey);
        const tokenBalance = await connection.getTokenAccountBalance(lltyAta);
        setBalance(tokenBalance.value.uiAmount || 0);
      } catch (err) {
        setBalance(0);
      }
      const solBalance = await connection.getBalance(publicKey);
      let usdcBalance = 0;
      try {
        const usdcAta = await getAssociatedTokenAddress(ADDRESSES.USDC_MINT, publicKey);
        const usdcBal = await connection.getTokenAccountBalance(usdcAta);
        usdcBalance = usdcBal.value.uiAmount || 0;
      } catch (err) {
        usdcBalance = 0;
      }
      let usdtBalance = 0;
      try {
        const usdtAta = await getAssociatedTokenAddress(ADDRESSES.USDT_MINT, publicKey);
        const usdtBal = await connection.getTokenAccountBalance(usdtAta);
        usdtBalance = usdtBal.value.uiAmount || 0;
      } catch (err) {
        usdtBalance = 0;
      }
      setWalletBalances({
        SOL: solBalance / LAMPORTS_PER_SOL,
        USDC: usdcBalance,
        USDT: usdtBalance
      });
    } catch (err) {
      console.error('Balance fetch error:', err);
      setBalance(0);
      setWalletBalances({ SOL: 0, USDC: 0, USDT: 0 });
    }
    const stored = localStorage.getItem('llty_wallet');
    if (stored) {
      try {
        const data = JSON.parse(stored);
        setPurchased(data.purchased || 0);
      } catch (err) {
        console.error('Failed to parse stored wallet data:', err);
      }
    }
  };

  // Calculate token amount
  const calculateTokenAmount = () => {
    if (!amount || parseFloat(amount) <= 0) return 0;
    const price = isVipPeriod ? PHASE_PRICES_DISPLAY.vip : (PHASE_PRICES_DISPLAY[currentPhase] || PHASE_PRICES_DISPLAY[1]);
    let usdValue = parseFloat(amount);
    if (currency === 'SOL' && solPrice > 0) {
      usdValue = parseFloat(amount) * solPrice;
    }
    
    // Calculate base tokens
    const baseTokens = usdValue / price;
    
    // Calculate bonus
    let bonusPercentage = 0;
    if (usdValue >= 10000) bonusPercentage = 15;
    else if (usdValue >= 5000) bonusPercentage = 10;
    else if (usdValue >= 1000) bonusPercentage = 5;
    
    const bonusTokens = (baseTokens * bonusPercentage) / 100;
    const totalTokens = baseTokens + bonusTokens;
    
    return totalTokens.toFixed(2);
  };

  // Get bonus percentage
  const getBonusPercentage = () => {
    if (!amount || parseFloat(amount) <= 0) return 0;
    let usdValue = parseFloat(amount);
    if (currency === 'SOL' && solPrice > 0) {
      usdValue = parseFloat(amount) * solPrice;
    }
    
    if (usdValue >= 10000) return 15;
    if (usdValue >= 5000) return 10;
    if (usdValue >= 1000) return 5;
    return 0;
  };

  // Swap to USDC via Jupiter (V2 - supports USDT natively in contract now, but keep for SOL)
  const swapToUSDC = async (inputMint, inputAmount) => {
    try {
      showNotification('info', t.swapping);
      const amountInSmallestUnit = inputMint.equals(ADDRESSES.USDT_MINT) || inputMint.equals(ADDRESSES.USDC_MINT)
        ? Math.floor(inputAmount * 1e6)
        : Math.floor(inputAmount * LAMPORTS_PER_SOL);
      const quoteResponse = await fetch(
        `https://quote-api.jup.ag/v6/quote?inputMint=${inputMint.toString()}&outputMint=${ADDRESSES.USDC_MINT.toString()}&amount=${amountInSmallestUnit}&slippageBps=50`
      );
      if (!quoteResponse.ok) throw new Error('Failed to get swap quote');
      const quoteData = await quoteResponse.json();
      const swapResponse = await fetch('https://quote-api.jup.ag/v6/swap', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          quoteResponse: quoteData,
          userPublicKey: wallet,
          wrapAndUnwrapSol: true,
          dynamicComputeUnitLimit: true,
          prioritizationFeeLamports: 'auto'
        })
      });
      if (!swapResponse.ok) throw new Error('Failed to get swap transaction');
      const { swapTransaction } = await swapResponse.json();
      const swapTransactionBuf = Buffer.from(swapTransaction, 'base64');
      const transaction = Transaction.from(swapTransactionBuf);
      const provider = getProvider();
      const { signature } = await provider.signAndSendTransaction(transaction);
      console.log('Swap signature:', signature);
      await connection.confirmTransaction(signature, 'confirmed');
      const usdcReceived = parseFloat(quoteData.outAmount) / 1e6;
      showNotification('success', `${t.swapSuccess}: ${usdcReceived.toFixed(2)} USDC`);
      return usdcReceived;
    } catch (err) {
      console.error('Swap error:', err);
      throw new Error(t.swapFailed + ': ' + (err.message || 'Unknown error'));
    }
  };

  // Buy tokens - V2 contract
  const buyTokens = async () => {
    if (!wallet) {
      showNotification('error', t.walletNotConnected);
      return;
    }
    const amt = parseFloat(amount);
    if (!amt || amt <= 0) {
      showNotification('error', t.error + ': Invalid amount');
      return;
    }
    
    // Check VIP minimum
    if (isVipPeriod && amt < 1000) {
      showNotification('error', lang === 'ar' ? 'ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ ŸÑŸÄ VIP: $1,000' : 'VIP minimum: $1,000');
      return;
    }
    
    setLoading(true);
    try {
      let usdcAmount = amt;
      const buyer = new PublicKey(wallet);
      
      // Only swap SOL (USDC and USDT handled by contract)
      if (currency === 'SOL') {
        const inputMint = new PublicKey('So11111111111111111111111111111111111111112');
        usdcAmount = await swapToUSDC(inputMint, amt);
        await new Promise(resolve => setTimeout(resolve, 2000));
      }
      
      const price = isVipPeriod ? PHASE_PRICES_DISPLAY.vip : PHASE_PRICES_DISPLAY[currentPhase];
      const tokenAmount = Math.floor((usdcAmount / price) * 1e9);
      const usdcAta = await getAssociatedTokenAddress(ADDRESSES.USDC_MINT, buyer);
      const lltyAta = await getAssociatedTokenAddress(ADDRESSES.LLTY_MINT, buyer);
      const tx = new Transaction();
      const lltyAccInfo = await connection.getAccountInfo(lltyAta);
      if (!lltyAccInfo) {
        tx.add(
          createAssociatedTokenAccountInstruction(buyer, lltyAta, buyer, ADDRESSES.LLTY_MINT)
        );
      }
      
      // V2 uses different discriminator - this is placeholder, actual function would be different
      const discriminator = new Uint8Array([189, 21, 230, 133, 247, 2, 110, 42]);
      const amountBytes = new anchor.BN(tokenAmount).toArrayLike(Buffer, 'le', 8);
      const data = Buffer.concat([Buffer.from(discriminator), amountBytes]);
      tx.add(
        new TransactionInstruction({
          keys: [
            { pubkey: ADDRESSES.PRESALE_PDA, isSigner: false, isWritable: true },
            { pubkey: buyer, isSigner: true, isWritable: true },
            { pubkey: usdcAta, isSigner: false, isWritable: true },
            { pubkey: lltyAta, isSigner: false, isWritable: true },
            { pubkey: ADDRESSES.USDC_VAULT, isSigner: false, isWritable: true },
            { pubkey: ADDRESSES.LLTY_VAULT, isSigner: false, isWritable: true },
            { pubkey: TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },
            { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },
          ],
          programId: ADDRESSES.PROGRAM_ID,
          data,
        })
      );
      tx.feePayer = buyer;
      const { blockhash } = await connection.getLatestBlockhash('confirmed');
      tx.recentBlockhash = blockhash;
      const provider = getProvider();
      const signed = await provider.signTransaction(tx);
      const signature = await connection.sendRawTransaction(signed.serialize());
      console.log('Buy signature:', signature);
      showNotification('info', t.processing);
      const confirmation = await connection.confirmTransaction(signature, 'confirmed');
      if (confirmation.value.err) throw new Error('Transaction failed on-chain');
      
      const stored = localStorage.getItem('llty_wallet');
      const dataStored = stored ? JSON.parse(stored) : { address: wallet, purchased: 0 };
      const tokensReceived = tokenAmount / 1e9;
      dataStored.purchased = (dataStored.purchased || 0) + tokensReceived;
      localStorage.setItem('llty_wallet', JSON.stringify(dataStored));
      setPurchased(dataStored.purchased);
      setAmount('');
      await fetchBalances(wallet);
      
      const totalData = localStorage.getItem('llty_total_raised');
      const currentTotal = totalData ? JSON.parse(totalData) : { raised: 0, sold: 0 };
      currentTotal.raised += usdcAmount;
      currentTotal.sold += tokensReceived;
      localStorage.setItem('llty_total_raised', JSON.stringify(currentTotal));
      setTotalRaised(currentTotal.raised);
      setTotalLLTYSold(currentTotal.sold);
      
      if (connection) await fetchPresaleData(connection);
      showNotification('success', `${t.success} ${tokensReceived.toLocaleString()} LLTY`);
    } catch (err) {
      console.error('Buy error:', err);
      showNotification('error', t.error + ': ' + (err.message || 'Unknown error'));
    }
    setLoading(false);
  };

  // Fetch presale data from chain
  const fetchPresaleData = async (conn) => {
    try {
      // Fetch from blockchain - placeholder for V2
      const totalData = localStorage.getItem('llty_total_raised');
      if (totalData) {
        const data = JSON.parse(totalData);
        setTotalRaised(data.raised || 0);
        setTotalLLTYSold(data.sold || 0);
      }
    } catch (err) {
      console.error('Failed to fetch presale data:', err);
    }
  };

  // Fetch SOL price
  const fetchSolPrice = async () => {
    try {
      const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd');
      const data = await response.json();
      setSolPrice(data.solana?.usd || 150);
    } catch (err) {
      setSolPrice(150);
    }
  };

  // Timer calculations
  useEffect(() => {
    const updateTimer = () => {
      const now = Date.now();
      
      // Check if in VIP period
      if (now >= PRESALE_START && now < PUBLIC_START) {
        setIsVipPeriod(true);
        const vipRemaining = PUBLIC_START - now;
        setPhaseTimeRemaining({
          days: Math.floor(vipRemaining / (1000 * 60 * 60 * 24)),
          hours: Math.floor((vipRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
          minutes: Math.floor((vipRemaining % (1000 * 60 * 60)) / (1000 * 60)),
          seconds: Math.floor((vipRemaining % (1000 * 60)) / 1000)
        });
        setCurrentPhase(0); // VIP phase
        return;
      }
      
      setIsVipPeriod(false);
      
      if (now < PUBLIC_START) {
        setCurrentPhase(0);
        return;
      }
      
      if (now > PRESALE_END) {
        setPresaleEnded(true);
        setPhaseTimeRemaining({ days: 0, hours: 0, minutes: 0, seconds: 0 });
        return;
      }
      
      const elapsed = now - PUBLIC_START;
      const phase = Math.min(Math.floor(elapsed / PHASE_DURATION) + 1, 3);
      setCurrentPhase(phase);
      
      const phaseStart = PUBLIC_START + ((phase - 1) * PHASE_DURATION);
      const phaseEnd = phaseStart + PHASE_DURATION;
      const remaining = phaseEnd - now;
      
      setPhaseTimeRemaining({
        days: Math.floor(remaining / (1000 * 60 * 60 * 24)),
        hours: Math.floor((remaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
        minutes: Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60)),
        seconds: Math.floor((remaining % (1000 * 60)) / 1000)
      });
    };
    
    updateTimer();
    const interval = setInterval(updateTimer, 1000);
    return () => clearInterval(interval);
  }, []);

  // City carousel
  useEffect(() => {
    const interval = setInterval(() => {
      setCurrentCityIndex((prev) => (prev + 1) % citiesData.length);
    }, 5000);
    return () => clearInterval(interval);
  }, []);

  // Initialize
  useEffect(() => {
    const conn = new Connection(RPC_ENDPOINT, 'confirmed');
    setConnection(conn);
    fetchSolPrice();
    fetchPresaleData(conn);
    const stored = localStorage.getItem('llty_wallet');
    if (stored) {
      try {
        const data = JSON.parse(stored);
        setWallet(data.address);
        fetchBalances(data.address);
      } catch (err) {
        console.error('Failed to restore wallet:', err);
      }
    }
  }, []);

  const progressPercentage = Math.min((totalRaised / PRESALE_TARGET) * 100, 100);

  // THIS IS THE END OF PART 2
  // Continue to PART 3...
// ============================================================================
// PART 3 OF 3 - UPDATED UI WITH FIXED COLORS & LAYOUT
// ============================================================================
// Copy this AFTER Part 1 and Part 2
// ============================================================================

  return (
    <div className={`min-h-screen ${lang === 'ar' ? 'rtl' : 'ltr'} font-sans`}
      style={{
        background: 'linear-gradient(to bottom, #0f172a 0%, #1e293b 50%, #334155 100%)',
        color: '#f1f5f9'
      }}>
      
      {/* ============================================================ */}
      {/* HEADER - Dark with high contrast */}
      {/* ============================================================ */}
      <header className="sticky top-0 z-50 backdrop-blur-md border-b border-yellow-500/20"
        style={{ background: 'rgba(15, 23, 42, 0.95)' }}>
        <div className="container mx-auto px-4 py-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <LLTYLogo size={48} />
              <div>
                <h1 className="text-2xl font-bold text-yellow-400">{t.title}</h1>
                <p className="text-xs text-gray-300">{t.subtitle}</p>
              </div>
            </div>
            
            <div className="hidden lg:flex items-center gap-6">
              <button onClick={() => scrollToSection('vip')} className="text-gray-200 hover:text-yellow-400 transition-colors font-medium">
                {t.navigation.vipAccess}
              </button>
              <button onClick={() => scrollToSection('bonuses')} className="text-gray-200 hover:text-yellow-400 transition-colors font-medium">
                {t.navigation.bonuses}
              </button>
              <button onClick={() => scrollToSection('referrals')} className="text-gray-200 hover:text-yellow-400 transition-colors font-medium">
                {t.navigation.referrals}
              </button>
              <button onClick={() => scrollToSection('about')} className="text-gray-200 hover:text-yellow-400 transition-colors font-medium">
                {t.navigation.about}
              </button>
              <button onClick={() => scrollToSection('tokenomics')} className="text-gray-200 hover:text-yellow-400 transition-colors font-medium">
                {t.navigation.tokenomics}
              </button>
              <button onClick={() => scrollToSection('roadmap')} className="text-gray-200 hover:text-yellow-400 transition-colors font-medium">
                {t.navigation.roadmap}
              </button>
            </div>

            <div className="flex items-center gap-3">
              <button
                onClick={() => setLang(lang === 'ar' ? 'en' : 'ar')}
                className="px-4 py-2 rounded-lg font-bold text-sm transition-all hover:scale-105"
                style={{ 
                  background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',
                  color: '#1e293b'
                }}>
                {lang === 'ar' ? 'English' : 'ÿπÿ±ÿ®Ÿä'}
              </button>

              {wallet ? (
                <div className="flex items-center gap-2">
                  <div className="hidden sm:block px-4 py-2 rounded-lg text-sm font-medium"
                    style={{ background: 'rgba(251, 191, 36, 0.1)', border: '1px solid rgba(251, 191, 36, 0.3)' }}>
                    <div className="text-yellow-400 font-bold">{shortenAddress(wallet)}</div>
                    <div className="text-xs text-gray-400">{balance.toFixed(2)} LLTY</div>
                  </div>
                  <button
                    onClick={disconnectWallet}
                    className="p-2 rounded-lg hover:bg-red-500/20 transition-colors">
                    <X size={20} className="text-red-400" />
                  </button>
                </div>
              ) : (
                <button
                  onClick={connectWallet}
                  disabled={loading}
                  className="flex items-center gap-2 px-6 py-3 rounded-lg font-bold transition-all hover:scale-105 disabled:opacity-50"
                  style={{ 
                    background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',
                    color: '#1e293b'
                  }}>
                  <Wallet size={20} />
                  <span>{loading ? t.connecting : t.connectWallet}</span>
                </button>
              )}

              <button
                onClick={() => setMenuOpen(!menuOpen)}
                className="lg:hidden p-2 text-gray-200">
                {menuOpen ? <X size={24} /> : <Menu size={24} />}
              </button>
            </div>
          </div>
        </div>

        {/* Mobile menu */}
        {menuOpen && (
          <div className="lg:hidden border-t border-yellow-500/20 py-4"
            style={{ background: 'rgba(15, 23, 42, 0.98)' }}>
            <div className="container mx-auto px-4 flex flex-col gap-3">
              <button onClick={() => scrollToSection('vip')} className="text-left py-2 text-gray-200 hover:text-yellow-400">
                {t.navigation.vipAccess}
              </button>
              <button onClick={() => scrollToSection('bonuses')} className="text-left py-2 text-gray-200 hover:text-yellow-400">
                {t.navigation.bonuses}
              </button>
              <button onClick={() => scrollToSection('referrals')} className="text-left py-2 text-gray-200 hover:text-yellow-400">
                {t.navigation.referrals}
              </button>
              <button onClick={() => scrollToSection('about')} className="text-left py-2 text-gray-200 hover:text-yellow-400">
                {t.navigation.about}
              </button>
              <button onClick={() => scrollToSection('tokenomics')} className="text-left py-2 text-gray-200 hover:text-yellow-400">
                {t.navigation.tokenomics}
              </button>
              <button onClick={() => scrollToSection('roadmap')} className="text-left py-2 text-gray-200 hover:text-yellow-400">
                {t.navigation.roadmap}
              </button>
            </div>
          </div>
        )}
      </header>

      {/* ============================================================ */}
      {/* NOTIFICATION */}
      {/* ============================================================ */}
      {notification.show && (
        <div className="fixed top-24 right-4 z-50 animate-slide-in-right">
          <div className={`flex items-center gap-3 px-6 py-4 rounded-lg shadow-2xl border ${
            notification.type === 'success' ? 'bg-green-900/90 border-green-500' :
            notification.type === 'error' ? 'bg-red-900/90 border-red-500' :
            'bg-blue-900/90 border-blue-500'
          }`}>
            {notification.type === 'success' ? <CheckCircle className="text-green-400" size={24} /> :
             notification.type === 'error' ? <AlertCircle className="text-red-400" size={24} /> :
             <Clock className="text-blue-400" size={24} />}
            <span className="font-medium text-white">{notification.message}</span>
          </div>
        </div>
      )}

      <main className="container mx-auto px-4 py-8">
        
        {/* ============================================================ */}
        {/* HERO SECTION WITH BIGGER CENTERED TIMER */}
        {/* ============================================================ */}
        <section className="text-center mb-12">
          <div className="flex justify-center mb-8">
            <LLTYLogo size={120} />
          </div>
          <h1 className="text-5xl md:text-7xl font-bold mb-4"
            style={{
              background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',
              WebkitBackgroundClip: 'text',
              WebkitTextFillColor: 'transparent'
            }}>
            {t.title}
          </h1>
          <p className="text-xl md:text-2xl mb-8 text-gray-300">{t.subtitle}</p>

          {/* ============================================================ */}
          {/* BIGGER TIMER - CENTERED AT TOP */}
          {/* ============================================================ */}
          <div className="max-w-3xl mx-auto mb-8">
            <div className="rounded-2xl p-8 shadow-2xl border-2"
              style={{ 
                background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
                borderColor: '#fbbf24'
              }}>
              
              {/* Phase Title */}
              <div className="flex items-center justify-center gap-3 mb-6">
                <Clock className="text-yellow-400" size={32} />
                <h2 className="text-3xl md:text-4xl font-bold text-yellow-400">
                  {isVipPeriod ? t.vipActive : `${t.phase} ${currentPhase}/3`}
                </h2>
              </div>

              {/* Urgency Message */}
              <div className="mb-6 px-6 py-3 rounded-lg text-center"
                style={{ background: 'rgba(239, 68, 68, 0.1)', border: '1px solid rgba(239, 68, 68, 0.3)' }}>
                <p className="text-lg font-bold text-red-400">{getUrgencyMessage()}</p>
              </div>

              {/* Next Price In Label */}
              <p className="text-yellow-400 text-lg mb-4 font-semibold">
                {presaleEnded ? t.presaleEnded : t.nextPriceIn}
              </p>

              {/* Timer Display - BIGGER */}
              <div className="grid grid-cols-4 gap-4 md:gap-6">
                {['days', 'hours', 'minutes', 'seconds'].map((unit) => (
                  <div key={unit} className="rounded-xl p-4 md:p-6"
                    style={{ 
                      background: 'rgba(251, 191, 36, 0.1)',
                      border: '2px solid rgba(251, 191, 36, 0.3)'
                    }}>
                    <div className="text-4xl md:text-6xl font-bold text-yellow-400 mb-2">
                      {String(phaseTimeRemaining[unit]).padStart(2, '0')}
                    </div>
                    <div className="text-sm md:text-base text-gray-300 uppercase font-semibold">
                      {t[unit]}
                    </div>
                  </div>
                ))}
              </div>

              {/* Current Price Display */}
              <div className="mt-6 pt-6 border-t border-yellow-500/30">
                <div className="flex flex-col md:flex-row items-center justify-between gap-4">
                  <div className="text-center md:text-left">
                    <p className="text-sm text-gray-400 mb-1">{t.tokenPrice}</p>
                    <p className="text-3xl font-bold text-yellow-400">
                      ${isVipPeriod ? PHASE_PRICES_DISPLAY.vip : PHASE_PRICES_DISPLAY[currentPhase]}
                    </p>
                  </div>
                  {!presaleEnded && currentPhase < 3 && (
                    <div className="text-center md:text-right">
                      <p className="text-sm text-gray-400 mb-1">Next Price</p>
                      <p className="text-2xl font-bold text-red-400">
                        ${isVipPeriod ? PHASE_PRICES_DISPLAY[1] : PHASE_PRICES_DISPLAY[currentPhase + 1]}
                      </p>
                    </div>
                  )}
                </div>
              </div>
            </div>
          </div>

          {/* ============================================================ */}
          {/* PROGRESS BAR - FIXED CALCULATION */}
          {/* ============================================================ */}
          <div className="max-w-4xl mx-auto mb-12 rounded-2xl p-8 shadow-2xl"
            style={{ 
              background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
              border: '2px solid rgba(251, 191, 36, 0.3)'
            }}>
            
            <div className="flex items-center justify-between mb-4">
              <div>
                <p className="text-xl font-semibold text-gray-300 mb-1">{t.totalRaised}</p>
                <p className="text-4xl font-bold text-yellow-400">
                  ${totalRaised.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
                </p>
              </div>
              <Target className="text-yellow-400" size={48} />
            </div>

            <div className="relative w-full h-8 rounded-full overflow-hidden mb-4"
              style={{ background: 'rgba(51, 65, 85, 0.5)' }}>
              <div
                className="absolute top-0 left-0 h-full rounded-full transition-all duration-1000"
                style={{
                  width: `${progressPercentage}%`,
                  background: 'linear-gradient(90deg, #fbbf24 0%, #f59e0b 100%)'
                }} />
              <div className="absolute inset-0 flex items-center justify-center">
                <span className="text-sm font-bold text-white drop-shadow-lg">
                  {progressPercentage.toFixed(1)}%
                </span>
              </div>
            </div>

            <div className="flex justify-between items-center">
              <p className="text-lg text-gray-400">
                {t.of} <span className="text-yellow-400 font-bold">${PRESALE_TARGET.toLocaleString()}</span>
              </p>
              <p className="text-sm text-gray-400">
                {totalLLTYSold.toLocaleString()} LLTY {t.purchased.toLowerCase()}
              </p>
            </div>
          </div>
        </section>

        {/* ============================================================ */}
        {/* VIP EARLY ACCESS SECTION */}
        {/* ============================================================ */}
        <section id="vip" className="mb-16">
          <div className="max-w-4xl mx-auto rounded-2xl p-8 shadow-2xl border-2"
            style={{ 
              background: 'linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%)',
              borderColor: '#fbbf24'
            }}>
            <div className="text-center mb-6">
              <h2 className="text-4xl font-bold text-white mb-3">{t.vipTitle}</h2>
              <p className="text-xl text-purple-200">{t.vipDescription}</p>
            </div>

            <div className="grid md:grid-cols-2 gap-6 mb-8">
              <div className="rounded-xl p-6 bg-white/10 backdrop-blur">
                <Star className="text-yellow-400 mb-3" size={32} />
                <h3 className="text-xl font-bold text-white mb-2">{t.vipPrice}</h3>
                <p className="text-purple-200">{t.vipMinPurchase}</p>
                <p className="text-purple-200">{t.vipDuration}</p>
              </div>

              <div className="rounded-xl p-6 bg-white/10 backdrop-blur">
                <Award className="text-yellow-400 mb-3" size={32} />
                <h3 className="text-xl font-bold text-white mb-2">{t.vipSlots}</h3>
                <p className="text-4xl font-bold text-yellow-400">{50 - vipBuyersCount} / 50</p>
              </div>
            </div>

            <div className="rounded-xl p-6 bg-white/10 backdrop-blur mb-6">
              <h3 className="text-2xl font-bold text-white mb-4">{t.vipBenefits}</h3>
              <ul className="space-y-3">
                <li className="flex items-start gap-3 text-white">
                  <CheckCircle className="text-yellow-400 flex-shrink-0 mt-1" size={20} />
                  <span>{t.vipBenefit1}</span>
                </li>
                <li className="flex items-start gap-3 text-white">
                  <CheckCircle className="text-yellow-400 flex-shrink-0 mt-1" size={20} />
                  <span>{t.vipBenefit2}</span>
                </li>
                <li className="flex items-start gap-3 text-white">
                  <CheckCircle className="text-yellow-400 flex-shrink-0 mt-1" size={20} />
                  <span>{t.vipBenefit3}</span>
                </li>
                <li className="flex items-start gap-3 text-white">
                  <CheckCircle className="text-yellow-400 flex-shrink-0 mt-1" size={20} />
                  <span>{t.vipBenefit4}</span>
                </li>
              </ul>
            </div>

            {isVipPeriod && (
              <div className="text-center">
                <button
                  onClick={() => scrollToSection('buy')}
                  className="px-8 py-4 rounded-xl font-bold text-lg transition-all hover:scale-105"
                  style={{ 
                    background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',
                    color: '#1e293b'
                  }}>
                  {t.investNow}
                </button>
              </div>
            )}
          </div>
        </section>

        {/* ============================================================ */}
        {/* BONUS TIERS SECTION */}
        {/* ============================================================ */}
        <section id="bonuses" className="mb-16">
          <div className="max-w-4xl mx-auto">
            <h2 className="text-4xl font-bold text-center mb-8 text-yellow-400">{t.bonusTitle}</h2>
            <p className="text-xl text-center mb-8 text-gray-300">{t.bonusDescription}</p>

            <div className="grid md:grid-cols-3 gap-6 mb-8">
              <div className="rounded-2xl p-6 shadow-xl border-2 text-center"
                style={{ 
                  background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
                  borderColor: '#10b981'
                }}>
                <div className="text-5xl mb-4">üí∞</div>
                <h3 className="text-2xl font-bold text-green-400 mb-2">5% Bonus</h3>
                <p className="text-gray-300 mb-4">{t.bonusTier1}</p>
                <p className="text-sm text-gray-400">Buy $1,000 - $4,999</p>
              </div>

              <div className="rounded-2xl p-6 shadow-xl border-2 text-center"
                style={{ 
                  background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
                  borderColor: '#3b82f6'
                }}>
                <div className="text-5xl mb-4">üíé</div>
                <h3 className="text-2xl font-bold text-blue-400 mb-2">10% Bonus</h3>
                <p className="text-gray-300 mb-4">{t.bonusTier2}</p>
                <p className="text-sm text-gray-400">Buy $5,000 - $9,999</p>
              </div>

              <div className="rounded-2xl p-6 shadow-xl border-2 text-center"
                style={{ 
                  background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
                  borderColor: '#fbbf24'
                }}>
                <div className="text-5xl mb-4">üëë</div>
                <h3 className="text-2xl font-bold text-yellow-400 mb-2">15% Bonus</h3>
                <p className="text-gray-300 mb-4">{t.bonusTier3}</p>
                <p className="text-sm text-gray-400">Buy $10,000+</p>
              </div>
            </div>

            <div className="rounded-2xl p-6 shadow-xl border-2 text-center"
              style={{ 
                background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
                borderColor: 'rgba(251, 191, 36, 0.3)'
              }}>
              <Gift className="text-yellow-400 mx-auto mb-4" size={48} />
              <p className="text-xl text-gray-300">{t.bonusExample}</p>
            </div>
          </div>
        </section>

        {/* ============================================================ */}
        {/* REFERRAL SYSTEM SECTION */}
        {/* ============================================================ */}
        <section id="referrals" className="mb-16">
          <div className="max-w-4xl mx-auto rounded-2xl p-8 shadow-2xl border-2"
            style={{ 
              background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
              borderColor: 'rgba(251, 191, 36, 0.3)'
            }}>
            <div className="text-center mb-8">
              <Users className="text-yellow-400 mx-auto mb-4" size={64} />
              <h2 className="text-4xl font-bold text-yellow-400 mb-3">{t.referralTitle}</h2>
              <p className="text-xl text-gray-300">{t.referralDescription}</p>
            </div>

            <div className="rounded-xl p-6 mb-8"
              style={{ background: 'rgba(251, 191, 36, 0.1)', border: '1px solid rgba(251, 191, 36, 0.3)' }}>
              <p className="text-2xl font-bold text-yellow-400 text-center">{t.referralBonus}</p>
            </div>

            <div className="mb-8">
              <h3 className="text-2xl font-bold text-white mb-4">{t.referralHow}</h3>
              <div className="space-y-4">
                <div className="flex items-start gap-4">
                  <div className="flex-shrink-0 w-8 h-8 rounded-full bg-yellow-400 flex items-center justify-center text-slate-900 font-bold">
                    1
                  </div>
                  <p className="text-gray-300 pt-1">{t.referralStep1}</p>
                </div>
                <div className="flex items-start gap-4">
                  <div className="flex-shrink-0 w-8 h-8 rounded-full bg-yellow-400 flex items-center justify-center text-slate-900 font-bold">
                    2
                  </div>
                  <p className="text-gray-300 pt-1">{t.referralStep2}</p>
                </div>
                <div className="flex items-start gap-4">
                  <div className="flex-shrink-0 w-8 h-8 rounded-full bg-yellow-400 flex items-center justify-center text-slate-900 font-bold">
                    3
                  </div>
                  <p className="text-gray-300 pt-1">{t.referralStep3}</p>
                </div>
              </div>
            </div>

            <div className="rounded-xl p-6"
              style={{ background: 'rgba(34, 197, 94, 0.1)', border: '1px solid rgba(34, 197, 94, 0.3)' }}>
              <p className="text-lg text-green-300 text-center">{t.referralExample}</p>
            </div>

            {wallet && (
              <div className="mt-8">
                <p className="text-sm text-gray-400 mb-2">{t.yourReferralLink}</p>
                <div className="flex gap-2">
                  <input
                    type="text"
                    value={`https://landloyalty.com/?ref=${wallet}`}
                    readOnly
                    className="flex-1 px-4 py-3 rounded-lg font-mono text-sm"
                    style={{ background: 'rgba(51, 65, 85, 0.5)', color: '#f1f5f9', border: '1px solid rgba(251, 191, 36, 0.3)' }}
                  />
                  <button
                    onClick={() => {
                      navigator.clipboard.writeText(`https://landloyalty.com/?ref=${wallet}`);
                      showNotification('success', lang === 'ar' ? 'ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ!' : 'Copied!');
                    }}
                    className="px-6 py-3 rounded-lg font-bold transition-all hover:scale-105"
                    style={{ 
                      background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',
                      color: '#1e293b'
                    }}>
                    <Send size={20} />
                  </button>
                </div>
              </div>
            )}
          </div>
        </section>

        {/* Continue to next comment for BUY SECTION... */}
// ============================================================================
// PART 3B - CONTINUED (BUY SECTION + REST OF UI)
// ============================================================================

        {/* ============================================================ */}
        {/* BUY SECTION */}
        {/* ============================================================ */}
        <section id="buy" className="mb-16">
          <div className="max-w-2xl mx-auto rounded-2xl p-8 shadow-2xl border-2"
            style={{ 
              background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
              borderColor: '#fbbf24'
            }}>
            <h2 className="text-3xl font-bold text-center mb-6 text-yellow-400">
              {isVipPeriod ? 'üëë VIP Purchase' : t.investNow}
            </h2>

            {wallet ? (
              <div className="space-y-6">
                {/* Currency Selection */}
                <div>
                  <label className="block text-sm font-semibold mb-2 text-gray-300">{t.selectCurrency}</label>
                  <div className="grid grid-cols-3 gap-3">
                    {['SOL', 'USDC', 'USDT'].map((curr) => (
                      <button
                        key={curr}
                        onClick={() => setCurrency(curr)}
                        className={`py-3 px-4 rounded-lg font-bold transition-all ${
                          currency === curr
                            ? 'scale-105 shadow-lg'
                            : 'opacity-60 hover:opacity-100'
                        }`}
                        style={{
                          background: currency === curr 
                            ? 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)'
                            : 'rgba(51, 65, 85, 0.5)',
                          color: currency === curr ? '#1e293b' : '#f1f5f9',
                          border: `2px solid ${currency === curr ? '#fbbf24' : 'rgba(251, 191, 36, 0.3)'}`
                        }}>
                        {curr}
                      </button>
                    ))}
                  </div>
                  {currency && walletBalances[currency] !== undefined && (
                    <p className="text-sm text-gray-400 mt-2">
                      Balance: {walletBalances[currency].toFixed(4)} {currency}
                    </p>
                  )}
                </div>

                {/* Amount Input */}
                <div>
                  <label className="block text-sm font-semibold mb-2 text-gray-300">{t.enterAmount}</label>
                  <input
                    type="number"
                    value={amount}
                    onChange={(e) => setAmount(e.target.value)}
                    placeholder={isVipPeriod ? "Min: $1,000" : "0.00"}
                    className="w-full px-4 py-4 rounded-lg text-xl font-bold text-white"
                    style={{ 
                      background: 'rgba(51, 65, 85, 0.5)',
                      border: '2px solid rgba(251, 191, 36, 0.3)'
                    }}
                  />
                </div>

                {/* Bonus Display */}
                {getBonusPercentage() > 0 && (
                  <div className="rounded-lg p-4 text-center"
                    style={{ background: 'rgba(34, 197, 94, 0.1)', border: '1px solid rgba(34, 197, 94, 0.3)' }}>
                    <Gift className="text-green-400 mx-auto mb-2" size={32} />
                    <p className="text-green-400 font-bold text-lg">
                      üéÅ {getBonusPercentage()}% Bonus Applied!
                    </p>
                  </div>
                )}

                {/* Token Display */}
                <div className="rounded-xl p-6 border-2"
                  style={{ background: 'rgba(251, 191, 36, 0.1)', borderColor: 'rgba(251, 191, 36, 0.3)' }}>
                  <p className="text-sm text-gray-400 mb-2">{t.youWillReceive}</p>
                  <p className="text-4xl font-bold text-yellow-400">
                    {calculateTokenAmount()} LLTY
                  </p>
                  {getBonusPercentage() > 0 && (
                    <p className="text-sm text-green-400 mt-2">
                      + {(parseFloat(calculateTokenAmount()) * getBonusPercentage() / (100 + getBonusPercentage())).toFixed(2)} bonus
                    </p>
                  )}
                </div>

                {/* Buy Button */}
                <button
                  onClick={buyTokens}
                  disabled={loading || !amount || parseFloat(amount) <= 0}
                  className="w-full py-4 rounded-xl font-bold text-xl transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
                  style={{ 
                    background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',
                    color: '#1e293b'
                  }}>
                  {loading ? t.processing : t.buy}
                </button>

                {/* User Stats */}
                {purchased > 0 && (
                  <div className="rounded-xl p-4 border"
                    style={{ background: 'rgba(251, 191, 36, 0.05)', borderColor: 'rgba(251, 191, 36, 0.2)' }}>
                    <p className="text-sm text-gray-400 mb-1">{t.yourBalance}</p>
                    <p className="text-2xl font-bold text-yellow-400">{purchased.toLocaleString()} LLTY</p>
                  </div>
                )}
              </div>
            ) : (
              <div className="text-center py-12">
                <Wallet className="mx-auto mb-4 text-gray-500" size={64} />
                <p className="text-xl text-gray-400 mb-6">{t.walletNotConnected}</p>
                <button
                  onClick={connectWallet}
                  className="px-8 py-4 rounded-xl font-bold text-lg transition-all hover:scale-105"
                  style={{ 
                    background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',
                    color: '#1e293b'
                  }}>
                  {t.connectWallet}
                </button>
              </div>
            )}
          </div>

          {/* Withdrawal Info */}
          <div className="max-w-2xl mx-auto mt-6 rounded-xl p-6 border"
            style={{ background: 'rgba(59, 130, 246, 0.1)', borderColor: 'rgba(59, 130, 246, 0.3)' }}>
            <div className="flex items-start gap-3">
              <Shield className="text-blue-400 flex-shrink-0 mt-1" size={24} />
              <div>
                <h3 className="font-bold text-blue-400 mb-2">{t.withdrawalTitle}</h3>
                <p className="text-sm text-gray-300 mb-1">‚úì {t.withdrawalDuring}</p>
                <p className="text-sm text-gray-300 mb-1">‚úì {t.withdrawalAfter}</p>
                <p className="text-xs text-gray-400 mt-2">üí° {t.withdrawalReason}</p>
              </div>
            </div>
          </div>
        </section>

        {/* ============================================================ */}
        {/* ABOUT SECTION */}
        {/* ============================================================ */}
        <section id="about" className="mb-16">
          <div className="max-w-4xl mx-auto rounded-2xl p-8 shadow-xl"
            style={{ 
              background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
              border: '1px solid rgba(251, 191, 36, 0.2)'
            }}>
            <h2 className="text-4xl font-bold text-center mb-6 text-yellow-400">{t.aboutTitle}</h2>
            <p className="text-xl text-gray-300 leading-relaxed text-center">{t.aboutText}</p>
          </div>
        </section>

        {/* ============================================================ */}
        {/* HOW IT WORKS */}
        {/* ============================================================ */}
        <section className="mb-16">
          <h2 className="text-4xl font-bold text-center mb-12 text-yellow-400">{t.howItWorks}</h2>
          <div className="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto">
            {[
              { icon: Coins, title: t.mechanicsTitle1, desc: t.mechanicsDesc1 },
              { icon: Building, title: t.mechanicsTitle2, desc: t.mechanicsDesc2 },
              { icon: TrendingUp, title: t.mechanicsTitle3, desc: t.mechanicsDesc3 }
            ].map((item, i) => (
              <div key={i} className="text-center rounded-2xl p-8 shadow-xl"
                style={{ 
                  background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
                  border: '1px solid rgba(251, 191, 36, 0.2)'
                }}>
                <div className="inline-flex items-center justify-center w-20 h-20 rounded-full mb-6"
                  style={{ background: 'rgba(251, 191, 36, 0.1)' }}>
                  <item.icon className="text-yellow-400" size={40} />
                </div>
                <h3 className="text-2xl font-bold mb-4 text-yellow-400">{item.title}</h3>
                <p className="text-gray-300 leading-relaxed">{item.desc}</p>
              </div>
            ))}
          </div>
        </section>

        {/* ============================================================ */}
        {/* CITIES CAROUSEL */}
        {/* ============================================================ */}
        <section className="mb-16">
          <h2 className="text-4xl font-bold text-center mb-8 text-yellow-400">{t.cities}</h2>
          <p className="text-xl text-center mb-8 text-gray-300">{t.cityList}</p>
          <div className="relative h-96 rounded-2xl overflow-hidden shadow-2xl">
            <img
              src={citiesData[currentCityIndex].image}
              alt={citiesData[currentCityIndex].name}
              className="w-full h-full object-cover transition-opacity duration-1000"
            />
            <div className="absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/50 to-transparent" />
            <div className="absolute bottom-0 left-0 right-0 p-8">
              <h3 className="text-3xl font-bold text-white mb-2">{citiesData[currentCityIndex].name}</h3>
              <div className="flex gap-2">
                {citiesData.map((_, i) => (
                  <button
                    key={i}
                    onClick={() => setCurrentCityIndex(i)}
                    className={`h-2 rounded-full transition-all ${
                      i === currentCityIndex ? 'w-8 bg-yellow-400' : 'w-2 bg-gray-500'
                    }`}
                  />
                ))}
              </div>
            </div>
          </div>
        </section>

        {/* ============================================================ */}
        {/* TOKENOMICS */}
        {/* ============================================================ */}
        <section id="tokenomics" className="mb-16">
          <h2 className="text-4xl font-bold text-center mb-12 text-yellow-400">{t.tokenomicsTitle}</h2>
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
            {[
              { label: t.presaleAllocation, value: '40%', desc: '4B LLTY' },
              { label: t.liquidityPool, value: '20%', desc: '2B LLTY' },
              { label: t.team, value: '20%', desc: '2B LLTY (Vested)' },
              { label: t.marketing, value: '10%', desc: '1B LLTY' },
              { label: t.reserve, value: '5%', desc: '500M LLTY' },
              { label: t.socialImpact, value: '5%', desc: '500M LLTY' }
            ].map((item, i) => (
              <div key={i} className="rounded-2xl p-6 text-center shadow-xl"
                style={{ 
                  background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
                  border: '1px solid rgba(251, 191, 36, 0.2)'
                }}>
                <p className="text-5xl font-bold text-yellow-400 mb-2">{item.value}</p>
                <p className="text-lg font-semibold text-gray-300 mb-1">{item.label}</p>
                <p className="text-sm text-gray-400">{item.desc}</p>
              </div>
            ))}
          </div>
        </section>

        {/* ============================================================ */}
        {/* ROADMAP */}
        {/* ============================================================ */}
        <section id="roadmap" className="mb-16">
          <h2 className="text-4xl font-bold text-center mb-12 text-yellow-400">{t.roadmapTitle}</h2>
          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
            {roadmapData.map((item, i) => (
              <div key={i} className="rounded-2xl p-6 shadow-xl border-l-4"
                style={{ 
                  background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
                  borderColor: '#fbbf24'
                }}>
                <p className="text-yellow-400 font-bold text-lg mb-2">{item.quarter}</p>
                <h3 className="text-xl font-bold text-white mb-3">{item.title}</h3>
                <p className="text-gray-400 text-sm">{item.desc}</p>
              </div>
            ))}
          </div>
        </section>

        {/* ============================================================ */}
        {/* SECURITY */}
        {/* ============================================================ */}
        <section className="mb-16">
          <div className="max-w-4xl mx-auto rounded-2xl p-8 text-center shadow-xl"
            style={{ 
              background: 'linear-gradient(135deg, #1e293b 0%, #0f172a 100%)',
              border: '2px solid rgba(34, 197, 94, 0.3)'
            }}>
            <Shield className="mx-auto mb-6 text-green-400" size={64} />
            <h2 className="text-4xl font-bold mb-4 text-green-400">{t.security}</h2>
            <p className="text-xl text-gray-300 leading-relaxed mb-8">{t.securityText}</p>
            <div className="flex flex-wrap gap-4 justify-center">
              <a
                href="/whitepaper-ar.pdf"
                target="_blank"
                className="flex items-center gap-2 px-6 py-3 rounded-lg font-bold transition-all hover:scale-105"
                style={{ 
                  background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',
                  color: '#1e293b'
                }}>
                <Download size={20} />
                {t.whitepaperAr}
              </a>
              <a
                href="/whitepaper-en.pdf"
                target="_blank"
                className="flex items-center gap-2 px-6 py-3 rounded-lg font-bold transition-all hover:scale-105"
                style={{ 
                  background: 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)',
                  color: '#1e293b'
                }}>
                <Download size={20} />
                {t.whitepaperEn}
              </a>
            </div>
          </div>
        </section>
      </main>

      {/* ============================================================ */}
      {/* FOOTER */}
      {/* ============================================================ */}
      <footer className="border-t py-12"
        style={{ borderColor: 'rgba(251, 191, 36, 0.2)', background: 'rgba(15, 23, 42, 0.95)' }}>
        <div className="container mx-auto px-4">
          <div className="flex flex-col md:flex-row items-center justify-between gap-6">
            <div className="flex items-center gap-3">
              <LLTYLogo size={40} />
              <div>
                <p className="font-bold text-yellow-400">Loyalty</p>
                <p className="text-xs text-gray-400">Real Estate Investment Token</p>
              </div>
            </div>
            
            <div className="flex gap-4">
              <a href="https://twitter.com/landloyalty" target="_blank" rel="noopener noreferrer"
                className="p-3 rounded-lg transition-all hover:scale-110"
                style={{ background: 'rgba(251, 191, 36, 0.1)' }}>
                <Twitter className="text-yellow-400" size={20} />
              </a>
              <a href="https://instagram.com/landloyalty" target="_blank" rel="noopener noreferrer"
                className="p-3 rounded-lg transition-all hover:scale-110"
                style={{ background: 'rgba(251, 191, 36, 0.1)' }}>
                <Instagram className="text-yellow-400" size={20} />
              </a>
              <a href="https://t.me/landloyalty" target="_blank" rel="noopener noreferrer"
                className="p-3 rounded-lg transition-all hover:scale-110"
                style={{ background: 'rgba(251, 191, 36, 0.1)' }}>
                <Send className="text-yellow-400" size={20} />
              </a>
            </div>
            
            <p className="text-sm text-gray-400">¬© 2026 Loyalty. All rights reserved.</p>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default LLTYPresale;

// ============================================================================
// END OF PART 3B - YOU'RE DONE!
// ============================================================================
// To use: Combine Part 1 + Part 2 + Part 3A + Part 3B into your App.jsx
// ============================================================================
